!function(n){function t(n){return function(){return!n.apply(null,arguments)}}function o(t){for(var o=0;o<n.tabs.length;o++)if(n.tabs[o]&&t===n.tabs[o].id)return o;return-1}var e=function(n){return!n||/^chrome-(devtools|extension)/.test(n.url)};n.removeTab=function(t){for(var o=0;o<n.tabs.length;o++)if(t===n.tabs[o].id){n.tabs.splice(o,1);break}},n.notInternalTab=t(e),n.getTabs=function(t){chrome.tabs.query({},function(o){n.tabs=o.sort(function(n,t){return t.index-n.index}),t&&t(n.tabs)})},n.getTabs(),chrome.tabs.onCreated.addListener(function(t){n.tabs.unshift(t)}),chrome.tabs.onRemoved.addListener(function(t){var e=o(t);e>=0&&n.tabs.splice(e,1)}),chrome.tabs.onUpdated.addListener(function(t,e,i){var a=o(t);a>=0?n.tabs[a]=i:n.tabs.push(i)}),chrome.tabs.onActivated.addListener(function(t){var e=o(t.tabId);if(e>=0){var i=n.tabs[e];tabs.splice(e,1),tabs.unshift(i)}else chrome.tabs.get(t.tabId,function(t){t&&n.tabs.unshift(t)})}),chrome.windows.onFocusChanged.addListener(function(t){t!==n.popupWindowId&&"number"==typeof n.popupWindowId&&chrome.windows.remove(n.popupWindowId,function(){n.popupWindowId=null})}),chrome.commands.onCommand.addListener(function(t){var o=450,e=new RegExp("win","i");e.test(navigator.platform)&&(o=480),"showTabularPopup"===t&&(null==n.popupWindowId?chrome.windows.create({url:"build/popup.html",type:"popup",focused:!0,width:o,height:600,left:screen.width/2-o/2,top:screen.height/2-300},function(t){n.popupWindowId=t.id}):chrome.windows.remove(n.popupWindowId,function(){n.popupWindowId=null}))})}(window);